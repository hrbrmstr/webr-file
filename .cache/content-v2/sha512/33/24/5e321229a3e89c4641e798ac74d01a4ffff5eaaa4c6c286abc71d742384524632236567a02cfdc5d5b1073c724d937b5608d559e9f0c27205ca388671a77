/**
 * Bundled by jsDelivr using Rollup v2.74.1 and Terser v5.15.1.
 * Original file: /npm/d3-chord@3.0.1/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{path as n}from"/npm/d3-path@3.1.0/+esm";var t=Math.abs,e=Math.cos,r=Math.sin,u=Math.PI,l=u/2,o=2*u,a=Math.max;function i(n,t){return Array.from({length:t-n},((t,e)=>n+e))}function c(n){return function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)}}function f(){return p(!1,!1)}function s(){return p(!1,!0)}function g(){return p(!0,!1)}function p(n,t){var e=0,r=null,u=null,l=null;function f(c){var f,s=c.length,g=new Array(s),p=i(0,s),h=new Array(s*s),d=new Array(s),v=0;c=Float64Array.from({length:s*s},t?(n,t)=>c[t%s][t/s|0]:(n,t)=>c[t/s|0][t%s]);for(let t=0;t<s;++t){let e=0;for(let r=0;r<s;++r)e+=c[t*s+r]+n*c[r*s+t];v+=g[t]=e}f=(v=a(0,o-e*s)/v)?e:o/s;{let t=0;r&&p.sort(((n,t)=>r(g[n],g[t])));for(const e of p){const r=t;if(n){const n=i(1+~s,s).filter((n=>n<0?c[~n*s+e]:c[e*s+n]));u&&n.sort(((n,t)=>u(n<0?-c[~n*s+e]:c[e*s+n],t<0?-c[~t*s+e]:c[e*s+t])));for(const r of n)if(r<0){(h[~r*s+e]||(h[~r*s+e]={source:null,target:null})).target={index:e,startAngle:t,endAngle:t+=c[~r*s+e]*v,value:c[~r*s+e]}}else{(h[e*s+r]||(h[e*s+r]={source:null,target:null})).source={index:e,startAngle:t,endAngle:t+=c[e*s+r]*v,value:c[e*s+r]}}d[e]={index:e,startAngle:r,endAngle:t,value:g[e]}}else{const n=i(0,s).filter((n=>c[e*s+n]||c[n*s+e]));u&&n.sort(((n,t)=>u(c[e*s+n],c[e*s+t])));for(const r of n){let n;if(e<r?(n=h[e*s+r]||(h[e*s+r]={source:null,target:null}),n.source={index:e,startAngle:t,endAngle:t+=c[e*s+r]*v,value:c[e*s+r]}):(n=h[r*s+e]||(h[r*s+e]={source:null,target:null}),n.target={index:e,startAngle:t,endAngle:t+=c[e*s+r]*v,value:c[e*s+r]},e===r&&(n.source=n.target)),n.source&&n.target&&n.source.value<n.target.value){const t=n.source;n.source=n.target,n.target=t}}d[e]={index:e,startAngle:r,endAngle:t,value:g[e]}}t+=f}}return(h=Object.values(h)).groups=d,l?h.sort(l):h}return f.padAngle=function(n){return arguments.length?(e=a(0,n),f):e},f.sortGroups=function(n){return arguments.length?(r=n,f):r},f.sortSubgroups=function(n){return arguments.length?(u=n,f):u},f.sortChords=function(n){return arguments.length?(null==n?l=null:(l=c(n))._=n,f):l&&l._},f}var h=Array.prototype.slice;function d(n){return function(){return n}}function v(n){return n.source}function y(n){return n.target}function A(n){return n.radius}function x(n){return n.startAngle}function m(n){return n.endAngle}function T(){return 0}function b(){return 10}function M(u){var o=v,a=y,i=A,c=A,f=x,s=m,g=T,p=null;function b(){var d,v=o.apply(this,arguments),y=a.apply(this,arguments),A=g.apply(this,arguments)/2,x=h.call(arguments),m=+i.apply(this,(x[0]=v,x)),T=f.apply(this,x)-l,b=s.apply(this,x)-l,M=+c.apply(this,(x[0]=y,x)),C=f.apply(this,x)-l,q=s.apply(this,x)-l;if(p||(p=d=n()),A>1e-12&&(t(b-T)>2*A+1e-12?b>T?(T+=A,b-=A):(T-=A,b+=A):T=b=(T+b)/2,t(q-C)>2*A+1e-12?q>C?(C+=A,q-=A):(C-=A,q+=A):C=q=(C+q)/2),p.moveTo(m*e(T),m*r(T)),p.arc(0,0,m,T,b),T!==C||b!==q)if(u){var w=+u.apply(this,arguments),R=M-w,P=(C+q)/2;p.quadraticCurveTo(0,0,R*e(C),R*r(C)),p.lineTo(M*e(P),M*r(P)),p.lineTo(R*e(q),R*r(q))}else p.quadraticCurveTo(0,0,M*e(C),M*r(C)),p.arc(0,0,M,C,q);if(p.quadraticCurveTo(0,0,m*e(T),m*r(T)),p.closePath(),d)return p=null,d+""||null}return u&&(b.headRadius=function(n){return arguments.length?(u="function"==typeof n?n:d(+n),b):u}),b.radius=function(n){return arguments.length?(i=c="function"==typeof n?n:d(+n),b):i},b.sourceRadius=function(n){return arguments.length?(i="function"==typeof n?n:d(+n),b):i},b.targetRadius=function(n){return arguments.length?(c="function"==typeof n?n:d(+n),b):c},b.startAngle=function(n){return arguments.length?(f="function"==typeof n?n:d(+n),b):f},b.endAngle=function(n){return arguments.length?(s="function"==typeof n?n:d(+n),b):s},b.padAngle=function(n){return arguments.length?(g="function"==typeof n?n:d(+n),b):g},b.source=function(n){return arguments.length?(o=n,b):o},b.target=function(n){return arguments.length?(a=n,b):a},b.context=function(n){return arguments.length?(p=null==n?null:n,b):p},b}function C(){return M()}function q(){return M(b)}export{f as chord,g as chordDirected,s as chordTranspose,C as ribbon,q as ribbonArrow};export default null;
//# sourceMappingURL=/sm/912c4cefec4b875446329a8e2fd2d47e61404ec2463c0ee03723780742038fc0.map